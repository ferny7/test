$(document).ready(function(){AYSITE.init(),AYSPEC.init()});var AYSITE={page:"",lang:"",file:"",init:function(){this.page=$("#site").attr("page"),this.lang=$("#site").attr("lang"),this.file=$("#site").attr("file"),$("#site").addClass("page-"+this.page),$("#site").addClass("file-"+this.file),$("#site").addClass("lang-"+this.lang),AYSITE.checkMobileDevice(),AYSITE.initEnterKeyPress(),AYSITE.initInputFields(),AYSITE.initSocialVideo(),AYSITE.initFileInput(),AYSITE.initGoogleMaps()},checkMobileDevice:function(){var e=navigator.userAgent,t=-1!=e.toLowerCase().indexOf("iphone"),a=-1!=e.toLowerCase().indexOf("ipad"),o=-1!=e.toLowerCase().indexOf("windows phone"),i=/Android/.test(e);t||a||o||i?$("#site").addClass("mobile-device"):$("#site").addClass("desktop-device")},initEnterKeyPress:function(){$(document).bind("keypress",function(event){if(13==event.keyCode){var obj=$(document.activeElement);if(null!=obj.attr("enter-event"))return eval(obj.attr("enter-event")),event.preventDefault(),!1}})},enterKeyPressTest:function(e,t){alert("enterKeyPressTest: "+e+"|"+t)},initInputFields:function(){$(":input").bind("focus",function(){AYSITE.inputFocus(this,!0)}),$("*[default-value]").bind("blur",function(){AYSITE.inputFocus(this,!1)}),$("input[input-type]").bind("keypress",function(e){return AYUTILS.inputRestrict(this,e,$(this).attr("input-type"))}),$("textarea[maxlength]").bind("input propertychange",function(){var e=$(this).attr("maxlength");$(this).val().length>e&&$(this).val($(this).val().substring(0,e))})},inputFocus:function(e,t){""!=$(e).attr("default-value")&&(t?$(e).val()==$(e).attr("default-value")&&$(e).val(""):""==AYUTILS.trim($(e).val())&&$(e).val($(e).attr("default-value"))),$(e).removeClass("input-error")},initFileInput:function(){$(".file-wrapper input[type=file]").bind("change focus click",AYSITE.fileInputs)},fileInputs:function(){var e=$(this),t=e.val(),a=t.split("\\"),o=a[a.length-1],i=(e.siblings(".button"),$("#"+e.attr("id")+"_tf"));""!==o&&null!=i&&i.val(o)},slideToDiv:function(e,t){if(!AYSITE.isBlocked()){AYSITE.blockMode(1);var a=$("body").prop("scrollTop"),o=$(e).offset().top+t,i=Math.abs(a-o),r=Math.max(i/.8,400);$("html, body").animate({scrollTop:o},r),setTimeout(function(){AYSITE.blockMode(-1)},r)}},goPageUp:function(){AYSITE.slideToDiv("site",0)},blocked:!1,blocked_counter:0,blockMode:function(e){this.blocked_counter+=e,this.blocked=this.blocked_counter>0},isBlocked:function(){return this.blocked},validateForm:function(e,t){for(var a=$(e).find(":input"),o=!0,i=0;i<a.length;i++)if(0==$(a[i]).attr("mandatory")&&""==AYUTILS.trim($(a[i]).val()))$(a[i]).removeClass("input-error");else if((1!=$(a[i]).attr("mandatory")||""!=AYUTILS.trim($(a[i]).val())&&$(a[i]).val()!=$(a[i]).attr("default-value"))&&AYUTILS.checkText($(a[i]).val(),$(a[i]).attr("input-type"))?null!=$(a[i]).attr("minlength")&&$(a[i]).val().length<Number($(a[i]).attr("minlength"))?(o=!1,$(a[i]).addClass("input-error")):null!=$(a[i]).attr("maxlength")&&$(a[i]).val().length>Number($(a[i]).attr("maxlength"))?(o=!1,$(a[i]).addClass("input-error")):$(a[i]).removeClass("input-error"):(o=!1,$(a[i]).addClass("input-error")),"radio"==$(a[i]).attr("type")&&1==$(a[i]).attr("mandatory"))0==$("div."+$(a[i]).attr("group")+" div div.selected").size()?(o=!1,$("div."+$(a[i]).attr("group")+" div").addClass("input-error")):$("div."+$(a[i]).attr("group")+" div").removeClass("input-error");else if("checkbox"==$(a[i]).attr("type")&&1==$(a[i]).attr("mandatory")){var r=$(a[i]).attr("id").substr(0,$(a[i]).attr("id").length-3);0==$(a[i]).prop("checked")?(o=!1,$("#"+r).addClass("input-error")):$("#"+r).removeClass("input-error")}if(!o){var n=token.FORM_CHECKFIELDS;""!=t?($(t).stop(!0,!1).fadeIn(500),$(t).html(n)):alert(n)}return o},formSubmit:function(e,t){$(t).removeClass("success"),$(t).removeClass("error"),$(t).stop(!0,!1).fadeOut(200);var a=this.validateForm(e,t);if(a&&!AYSITE.isBlocked()){AYSITE.blockMode(1),$("#site").css("cursor","wait");for(var o={},i=$(e).find(":input"),r=0;r<i.length;r++)"radio"==$(i[r]).attr("type")||"checkbox"==$(i[r]).attr("type")?o[$(i[r]).attr("name")]=$("input[name="+$(i[r]).attr("name")+"]:checked",e).val():o[$(i[r]).attr("name")]=$(i[r]).val();$.post($(e).attr("action"),o,function(a){AYSITE.callbackSubmitForm(a,e,t)})}},callbackSubmitForm:function(e,t,a){AYSITE.blockMode(-1),$("#site").css("cursor","auto"),"ok"==e?($(t).find("textarea").val(""),$(t).find(":input[type=text]").val(""),$(t).find(":input[type=email]").val(""),$(t).find(":input[type=tel]").val(""),$(t).find(":input[type=file]").val(""),$(t).find(":input[type=radio]").prop("checked",!1),$(t).find(":input[type=checkbox]").prop("checked",!1),$(t).find(".ay-radio").find(".selected").removeClass("selected"),$(t).find(".ay-checkbox").find(".selected").removeClass("selected"),$(a).stop(!0,!1).fadeIn(500),$(a).html(token.FORM_SUCCESS),$(a).addClass("success")):($(a).stop(!0,!1).fadeIn(500),$(a).html(token.FORM_ERROR),$(a).addClass("error"))},handleRadioBox:function(e,t){$("#"+e+"_tf").prop("checked",!0),$("."+t+" div").removeClass("selected").removeClass("input-error"),$("#"+e+" div").addClass("selected")},handleCheckBox:function(e){$("#"+e).removeClass("input-error"),1==$("#"+e+"_tf").prop("checked")?($("#"+e+"_tf").prop("checked",!1),$("#"+e+" div").removeClass("selected")):($("#"+e+"_tf").prop("checked",!0),$("#"+e+" div").addClass("selected"))},handleMobileMenu:function(e){e?($("#menu").slideUp(300),$("#menu-mobile-icon").addClass("closed")):$("#menu-mobile-icon").hasClass("closed")?($("#menu").slideDown(300),$("#menu-mobile-icon").removeClass("closed")):($("#menu").slideUp(300),$("#menu-mobile-icon").addClass("closed"))},handleNewsletter:function(){""!=AYUTILS.trim($("#newsletter_tf").val())&&AYUTILS.checkText($("#newsletter_tf").val(),"email")?(AYSITE.blockMode(1),$("#site").css("cursor","wait"),$("#newsletter-msg").fadeOut(200),$.post("/requests/subscribe_newsletter.php",{email_tf:$("#newsletter_tf").val()},function(e){AYSITE.callbackNewsletter(e)})):$("#newsletter-msg").fadeIn(200).html("O seu email não é válido")},callbackNewsletter:function(e){AYSITE.blockMode(-1),$("#site").css("cursor","auto"),$("#newsletter-msg").fadeIn(200).html(e)},initSocialVideo:function(){$(".social-video").each(function(e,t){AYSITE.loadSocialVideo(this)})},loadSocialVideo:function(e){if(""==$(e).attr("src")){var t,a=$(e).attr("data-id");-1!=a.indexOf("youtu.be")||-1!=a.indexOf("youtube.com")?t="//www.youtube.com/embed/"+AYUTILS.parseYoutubeURL(a)+"?rel=0&showinfo=0&controls=2":-1!=a.indexOf("vimeo.com")&&(t="//player.vimeo.com/video/"+AYUTILS.parseVimeoURL(a)),$(e).attr("src",t)}},initGoogleMaps:function(){var e=$(".aygmaps");e.length>0&&$.getScript("https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false").then(function(){google.maps.event.addDomListener(window,"load",AYSITE.configureGoogleMaps)})},configureGoogleMaps:function(){var e=$(".aygmaps");this.maps_array=[];for(var t=0;t<e.length;t++){var a=$(e[t]),o={zoom:Number(a.attr("zoom")),center:new google.maps.LatLng(a.attr("lat"),a.attr("lon")),mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1},i=new google.maps.Map($(e[t])[0],o),r=new google.maps.LatLng(a.attr("lat"),a.attr("lon"));new google.maps.Marker({position:r,map:i});this.maps_array.push(i)}google.maps.event.addDomListener(window,"resize",AYSITE.resizeGoogleMaps)},resizeGoogleMaps:function(){for(var e=0;e<this.maps_array.length;e++){var t=this.maps_array[e],a=t.getCenter();google.maps.event.trigger(t,"resize"),t.setCenter(a)}}},AYUTILS={inputRestrict:function(e,t,a){var o,i;if(window.event)o=window.event.keyCode;else{if(!t)return!0;o=t.which}return i=String.fromCharCode(o).toLowerCase(),null==o||0==o||8==o||9==o||13==o||27==o?!0:"phone"==a&&"0123456789+/ ".indexOf(i)>-1?!0:"email"==a&&"1234567890abcdefghijklmnopqrstuvwxyz@._-".indexOf(i)>-1?!0:"url"==a&&"0123456789abcdefghijklmnopqrstuvwxyz:./@&?+=-,".indexOf(i)>-1?!0:"alpha"==a&&"abcdefghijklmnopqrstuvwxyz".indexOf(i)>-1?!0:"alphanumeric"==a&&"abcdefghijklmnopqrstuvwxyz0123456789-".indexOf(i)>-1?!0:"number"==a&&"-0123456789".indexOf(i)>-1?!0:"decimal"==a&&"-0123456789.".indexOf(i)>-1},checkText:function(e,t){var a=AYUTILS.trim(e);if(""==a)return!0;if("alphanumeric"==t){var o=/^([a-zA-Z0-9\-]+)$/;return o.test(a.toLowerCase())}if("alpha"==t){var o=/^([a-zA-Z]+)$/;return o.test(a.toLowerCase())}if("number"==t){var o=/^([0-9\-]+)$/;return o.test(a.toLowerCase())?!isNaN(a):!1}if("phone"==t){var o=/^([0-9\+\ ]+)$/;return o.test(a.toLowerCase())}if("decimal"==t){var o=/^([0-9\-.]+)$/;return o.test(a.toLowerCase())?!isNaN(a):!1}if("email"==t){var o=/^((([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+(\.([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+)*)@((((([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.))*([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.)[\w]{2,6}|(((([0-9]){1,3}\.){3}([0-9]){1,3}))|(\[((([0-9]){1,3}\.){3}([0-9]){1,3})\])))$/;return o.test(a.toLowerCase())}if("url"==t){var o=/https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?/;return o.test(a)}return!0},trim:function(e){for(var e=e.replace(/^\s\s*/,""),t=/\s/,a=e.length;t.test(e.charAt(--a)););return e.slice(0,a+1)},parseYoutubeURL:function(e){var t=/^(?:http(?:s)?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:(?:watch)?\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/))([^\?&\"'>]+)/,a=e.match(t);return a?a[1]:""},parseVimeoURL:function(e){var t=/http(?:s)?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,a=e.match(t);return a?a[2]:""},delegate:function(e,t,a){return"function"==typeof t?function(){arguments.push=Array.prototype.push;for(var o in a)a.hasOwnProperty(o)&&arguments.push(a[o]);return t.apply(e,arguments)}:function(){return!1}},cleanDelegate:function(e,t,a){return"function"==typeof t?function(){var o=[];for(var i in a)a.hasOwnProperty(i)&&o.push(a[i]);return t.apply(e,o)}:function(){return!1}}},AYBLOG={submitBlogComment:function(){if(!AYSITE.isBlocked()){if(""==AYUTILS.trim($("#blog-author-email").val())||""==AYUTILS.trim($("#blog-author").val())||""==AYUTILS.trim($("#blog-comment").val()))return""==AYUTILS.trim($("#blog-author-email").val())?$("#blog-author-email").addClass("input-error"):$("#blog-author-email").removeClassClass("input-error"),""==AYUTILS.trim($("#blog-author").val())?$("#blog-author").addClass("input-error"):$("#blog-author").removeClassClass("input-error"),void(""==AYUTILS.trim($("#blog-comment").val())?$("#blog-comment").addClass("input-error"):$("#blog-comment").removeClassClass("input-error"));AYSITE.blockMode(1),$("#site").css("cursor","wait"),$.post("/requests/submit_blog_comment.php",{email_tf:$("#blog-author-email").val(),name_tf:$("#blog-author").val(),comment_tf:$("#blog-comment").val(),id:$("#post_id").val()},function(e){AYBLOG.callbackComment(e)})}},callbackComment:function(e){AYSITE.blockMode(-1),$("#site").css("cursor","auto"),$("#blog-author").val(""),$("#blog-author-email").val(""),$("#blog-comment").val("")},blogArchiveFolders:function(e){$(e).parent().toggleClass("open")}},AYSPEC={slideshow:null,init:function(){"home"==AYSITE.file?slideshow=new AYSlideshow("#mainhighlight",5e3,{auto:!0,autobullets:!0,type:"fade"}):"template_text"==AYSITE.file?slideshow=new AYSlideshow("#zoomslideshow",0,{auto:!1,type:"fade"}):"blog_list"==AYSITE.file&&(slideshow=new AYSlideshow(".slideshow",5e3,{auto:!0,autobullets:!0,type:"fade"}))}};